# Template file for 'ghdl'
pkgname=ghdl
version=0.35
revision=1
only_for_archs="x86_64"
build_style=gnu-configure
hostmakedepends="ncurses"
makedepends="zlib-devel"
short_desc="VHDL 2008/93/87 simulator"
maintainer="Piotr WÃ³jcik <chocimier@tlen.pl>"
license="GPL-2"
homepage="https://github.com/ghdl/ghdl"
distfiles="https://github.com/ghdl/ghdl/archive/v${version}.tar.gz
 http://mirrors.cdn.adacore.com/art/591c6d80c7a447af2deed1d7>gnat-gpl-2017-x86_64-linux-bin.tar.gz"
checksum="23ce59310c7741be24b2e9f648dd507920b71877995a8426d7bc3185b36b3999
 b942bcac20dea39748b39f8b624d9619f60a8dee2e8195dbe3829c835b0956e6"
nopie=yes
export PATH="/usr/gnat/bin:$PATH"

post_extract() {
	cat ${FILESDIR}/gnat-doinstall-input | ../gnat-gpl-2017-x86_64-linux-bin/doinstall
	export PATH="/usr/gnat/bin:$PATH"
}

do_configure() {
	./configure --prefix=/usr
}

